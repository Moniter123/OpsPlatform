{% extends 'new_basic.html' %}
{% block title %}Dashboadr{% endblock %}
{% block content %}

    <aside class="right-side" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html"
           xmlns="http://www.w3.org/1999/html">


        <section class="col-lg-12 connectedSortable ui-sortable">
            <div class="row">
             <div class="col-xs-12">



                <!-- /.box-header -->
                   <div class="box-body">


                       <div class="box box-info">
                            <div class="box-header with-border">
                              <h3 class="box-title">Salt 命令执行 </h3>
                            </div>
                            <!-- /.box-header -->
                       <form action="{{url_for('salt.saltcmd')}}" method="post">
                            <div class="panel-body">
                              <table>
                                <tr>
                                  <td><input size=100% type="text" value="{{ request.form.host }}" class="form-control" name="host" placeholder="Host"></td>
                                  <td><input  size=100% type="text" value="{{ request.form.cmd }}" class="form-control" name="cmd" placeholder="Cmd"></td>
                                  <td><button type="submit" class="btn btn-primary"> Run </button></td>
                                </tr>
                              </table>
                            </div>
                        </form>

                                 {% for message in get_flashed_messages(with_categories=True) %}
                                <div class="alert alert-{{ message[0] }}">
                                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                                   <b>{{ message[1] }} {{ cmd }}</b>
                                </div>
                        {% endfor %}
                    <textarea style="margin: 1px 2px 10px; height: 450px; width: 100%; background-color: black;color: green">
{% for k,v in result %}
耗时: {{ tc }} 秒
目标主机: {{ k }}
执行命令: {{ cmd }}
-----------Result-----------
{{ v }}
{% endfor %}
                     </textarea>
                        </div>
                   </div>
              </div>

             </div>

        </section>

    </aside>
{% endblock %}

